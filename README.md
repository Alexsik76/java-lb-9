# Task 1. Parallel algorithm and shared state

## Переказ коштів

У Вас є клас Bank з методом ```transfer ()``` для переказу грошей з одного рахунку на інший в межах банку.

```java
public class Bank {
    public void transfer(Account from, Account to, int amount){
        atomic {
            from.withdraw(amount);
            to.deposit(amount);
        }
    }
}
```

На жаль, в Java відсутня конструкція типу ```atomic``` для виконання транзакцій.

Напишіть свою реалізація тіла методу ```transfer()```, яка могла б працювати в багатопотоковому середовищі.

Під час переказу грошей з рахунку на рахунок, дані рахунки повинні блокуватися. Подумайте, як при цьому уникнути deadlock-ів.
Виконайте тестування методу ```transfer()```. Для цього:

1. Створіть кілька десятків (сотень) рахунків і покладіть на них випадкову кількість грошей
2. Підрахуйте скільки всього є грошей (сума грошей на всіх рахунках)
3. Запустіть в декількох тисячах потоків одночасний переказ випадкових сум грошей з випадкового рахунку на випадковий рахунок (сума на рахунку не може бути негативною)

Дочекайтеся закінчення переказів і підрахуйте скільки грошей є всього в банку (сума грошей на всіх рахунках). Сума грошей в банку до перекладів і після, очевидно, повинні збігатися.

